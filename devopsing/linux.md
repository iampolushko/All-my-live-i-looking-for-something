## after install install ubuntu

update packages
обновить инфу о репоизитриях с пакетами

```
sudo apt update
```

обновит пакеты

```
sudo apt upgrade -y
```
#### nextcloud
Если nextcloud установлен в стоке, то перейди в папку /var/snap/nextcloud/45728/nextcloud/config и укажи в config.php в trusted_domains ip адрес роутера

## After extend the disk space in ProxMox

df -h
or
vgdisplay
info about the hard drives

For extend the disk with space what you add in ProxMox

1. type this command

   ```
   cf - disk
   ```

2. Point your main disk(sda3 or just the biggest one) and choose **resize** punct on botton panel
3. Point the extended disk and choose **write** punct on botton panel
4. type this command but for disk what ws extended(don't change it if you extend sda3). This command is made for extend the partition

   ```
   pvresize /dev/sda3
   ```

5) type this command for extend the volume
   ```
   lvextend -l +100%FREE /dev/ubuntu-vg/ubuntu-lv
   ```
6) type this for resize Root File System
   ```
   resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv
   ```
7) Confirm Changes
   ```
   df-h
   ```

# Just usefull commands

#### Show usb devices

install

```
sudo apt install usbview
```

open app in gui

```
sudo usbview
```

Make user access for folder in admin directory.($USER — reference of user)

```
sudo chown -R $USER:$USER /var/www/your_domain
```
For check is app active
```
sudo systemctl is-active 'service name'
```

For check app status

```
sudo systemctl status 'service name'
```

For start the stopped app

```
sudo systemctl start 'service name'
```

Change user

```
su - username
```

Delete user

```
sudo deluser --remove-home username
```
NextCloudAccess from web

Зайди в  ```/var/snap/nextcloud/45728/nextcloud/config``` и укажи в config.php в trusted_domains ip адрес роутера


Если не заходит на жёсткий диск sdb1 с форматом ntfs, то:

```sudo umount /dev/sdb1```

```sudo blkid /dev/sdb1```

```sudo ntfsfix /dev/sdb1```

```sudo mkdir -p /media/sdb1```

```sudo mount -t ntfs-3g /dev/sdb1 /media/sdb1```

```xdg-open /media/sdb1```

# Теория из книжки

``$`` - обычный пользователь
``#`` - супер пользователь

## Команды и опции
При работе в командной строке, мы используем командный интерпретатор(Самый популярный - Bash), который интрепретирует команды в действия системы и действия системы в ответ.

Синтаксис команд в bash: команда -> опции -> аргументы.
Иногда для уменьшения вводимого текста используются длинные ключи (команда --слово) или короткие опции (команда -c). Например ``ls -l``. Список всех доступный опций команды можно получить, если ввести ключ ``команда --help``. Команды бывают обычными в встроенными в оболочку(их невозможно найти как программы на диске, но зато они доступны сразу после загрузки оболочки)
p.s. Длинные опции не могут содержать пробелов.

## Аргументы
Бывают аргументы команцы ``команда аргумент1 аргумент2)`` и аргументы опций/ключей ``команда --опция аргумент --опция аргумент``

## Документация
Вместе с пакетами программного обеспечения часто устонавливается документация, которая находится в каталоге ``/usr/share/doc``
**man** - это справочная система. Синтаксис выглядит так: ``man команда``. 
Вывод состоит из нескольких секций как:
``man [N] команда`` где 0 - файлы заголовков, 1 - команды оболочки, 2 - системные вызовы, 3 - библиотечные вызовы, 4 - специальные файлы, 5 - конфигурационные файлы, 6 - игры, 7 - соглашения, 8 - команды системного администрирования, 9 - ядро;
``Synopsis (Синтаксис)`` - показывает все доступные опции и маркирует обязательные(без скобок) и необязательные(в [])
``Description`` - полное описание команды.
``Options`` - список всех опций и описаний к ним.
``Files`` - список файлов, связанных с командой.(не всегда есть)
``See also`` - список связанных команд.
``Author`` - автор команды

## Работа с каталогами

У команы ``ls`` есть опции ``d`` - информация о самом каталоге, ``-l`` - информация о байтах, ``-a`` - показать все файлы, ``-S`` - сортировка по размеру.

### FHS (Filesystem Hierarchy Standard)
![](/devopsing/resources/FHS.jpg)

``/`` - корневой каталог со всей иерархией

``/bin`` - основный утилиты для всех пользователей

``/boot`` - загрузочные файлы, ядро системы(в некоторых дистрибутивах оно может быть не доступно из файловой системы)

``/dev`` - файловая система для устройств(типа клавиатуры) и терминалов типа **tty1** (на картинке TTY_diagram пояснение)

``/etc`` - конфигурационные файлы для системных утилит для всех пользователей, так что изменять в нём что-то может только root.

``/home`` - домашние каталоги пользователей и персональные настройки пользователей. Именно здесь пользователь и работает с файлами.

``/usr`` - вторичная иерархия для данных пользователя. Содержит большинство
пользовательских приложений и утилит, используемых в многопользовательском
режиме.(Бинарки с настройками)

``/lib`` - библиотеки для работы программы из ``/bin`` и ``/sbin``.

``/media`` - точки монтирования для сменных носителей,

``/mnt`` - Содержит временно монтируемые файловые системы.

``/opt`` - программные пакеты, которые не управляются пакетным менеджером. Часто, для безопасности в него ставят протеитарные пакеты.

``/proc`` - это не настоящая файловая система. Она виртуальная и содержит в себе состояние ядра операционной
системы и запущенных процессов в виде файлов. Ее основная задача — получение состояния системы и частично выполнение управляющих действий.

``/root`` - домашний каталог пользователя root.

``/sbin`` -

``/srv`` - используется для хранения файлов, которые будут обслуживаться в сети, до того, как появились пакеты с определенным мнением.

``/tmp`` - временные файлы.

``/var`` - изменяемые файлы, такие как файлы регистрации, временные почтовые файлы,
файлы журналов.

TTY_diagram

![](/devopsing/resources/TTY_diagram.jpg)

p.s.
``/media``, ``/srv`` — это «новая школа». система не понимает «съёмные носители», их понимают программы типа udisks2, которые мониторят ``/media`` и говорят «создать .desktop файл в ~/Desktop», или чё они там делают.
``/media`` придумали в дополнение к ``/mnt``, а ``/srv`` в дополнение к ``/var``.

## Робота с файлами
Бывают обычные файлы, каталоги(такой-же файл, но содержащий ссылки на другие файлы) и ссылки(информацию о расположении какого-либо другого файла)

Команды для работы с файлами:

``touch 'файл'`` - создать пустой файл без расширения

``cp 'файл1' 'файл2'``, где файл1 - это копируемый файл, а файл2 - это файл, в который будет скопирован файл1. Если файл2 не существует, то система создаст его.

``mkdir 'имя каталога'`` - создание каталога

``cd 'полный адрес'`` или  ``cd 'дирикторий в этом директории'`` - для перехода из одной директории в другую



``rm 'файл' `` - удаление файла

``rmdir 'имя каталога'`` - удаление каталога. Удалять можно только пустой каталог.

``rm -rf 'имя каталога'`` - удаление всех файлов в каталоге

Текстовые редакторы: cat(просто команда для просмотра текста), head/tail(смотрим только несколько первых/последних строк), nano, TECO(из семейства Emacs/MACroS, сильно устарел), JOE(почти нигде не встретить), vim(vi)  

Ты скорее всего будешь использовать vim. Основные команды:

Чтобы зайти в vim: ```vi 'название файла' ```

Чтобы начать редактирование нужно нажать ```i``` на клавиатуре, а чтобы прекратить ``esc``

Чтобы искать в файле свреху вниз нажимаем ```/```, а снизу вверх ```?```

Чтобы использовать следующие команды нужно нажать двоеточие(да, прямо с зажатым шифтом) и внизу появиться поле для команд:

```:q``` - выйти, если нет изменений в файле

```:q!``` - выйти, отменив изменения в файле

```:w``` - сохранить файл

```:wq``` - выйти, сохранив файл
 



